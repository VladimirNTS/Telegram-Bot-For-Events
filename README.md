# Телеграм бот для огранизации мероприятий

## Архитектура админ-панели и логика системы

### 0. Назначение документа
**Документ описывает:**
- структуру админ-панели
- сущности системы
- основные пользовательские сценарии
- связи между Telegram-ботом и админкой

Документ используется:
- дизайнером для построения экранов и UX
- разработчиком как логическая карта системы

### 1. Архитектура системы
**Компоненты:**
- Telegram Bot (UI + уведомления)
- Web Admin Panel (основная логика)
- База данных
- Платёжный провайдер (Ю-Касса)
- Backend API (связывает базу данных, оплату и интерфейс)

Принцип:
Вся бизнес-логика и решения - в админке
Бот - только клиент

### 2. Основные сущности системы (будут использоваться для проектирования базы данных и API)
#### 2.1 User
- id
- telegram_id
- name
- phone
- selected_section
- status (active / blocked)
- created_at
- last_activity_at

#### 2.2 Event
- id: int
- section (kms / business / expo / partner): str
- title: str
- description: str
- format: str
- start_datetime: DateTime
- end_datetime: DateTime
- location_text: str
- location_map_url: str
- price: float
- is_free: bool
- limit: int
- enable_waitlist: bool
- status (draft / active / archived): str

2.3 Registration

id

user_id

event_id

status (registered / waiting / cancelled)

payment_status

form_data (json)

created_at

2.4 Waitlist

id

event_id

user_id

position

invited_at

expires_at

status (waiting / invited / expired)

2.5 Payment

id

user_id

event_id

amount

status

provider

external_id

created_at

2.6 Review

id

event_id

user_id

rating

comment

created_at

2.7 Documents

id

type (contract / invoice / act)

related_entity (expo / partner)

status

generated_at

sent_at

3. Структура админ-панели (экранная модель)
3.1 Layout (база)

Авторизация

Header (поиск, профиль)

Sidebar (разделы)

Content area

3.2 Дашборд

Назначение: быстрый контроль системы

Блоки:

Активные мероприятия

Новые регистрации

Очереди с таймерами

Платежи (ожидают)

Напоминания сегодня

4. Мероприятия (ключевой раздел)
4.1 Список мероприятий

таблица

фильтры: раздел / статус / дата

действия: открыть / редактировать / архив

4.2 Форма мероприятия (единая)

Разбивка по вкладкам (для дизайна):

Вкладка 1 — Основное

раздел

название

описание

формат

дата / время

место + карта

Вкладка 2 — Условия участия

бесплатно / платно

стоимость

лимит

очередь (on/off)

Вкладка 3 — Анкета

обязательные поля

дополнительные поля

логика повторного заполнения

Вкладка 4 — Напоминания

тексты 48 / 24 / 3 / 1

активность

ограничения по времени

Вкладка 5 — QR и ссылки

QR на событие

ссылка на бот

4.3 Карточка мероприятия

Tabs:

Участники

Очередь

Платежи

Отзывы

Журнал изменений

5. Регистрации и очередь
Регистрации:

таблица

фильтры

быстрые действия

карточка регистрации

Очередь:

отдельная страница

таймер 16 часов

авто-переходы

6. Выставки и партнёры (смарт-процессы)
Заявка:

анкета

статус

решение организатора

финансы

документы

Отличие:

решения принимаются вручную

бот только уведомляет

7. Платежи и документы
Платежи:

список

карточка

лог событий

Документы:

шаблоны

генерация

отправка в Telegram

8. Пользователи

Карточка пользователя:

профиль

история

быстрый переход в Telegram

чёрный список

заметки

9. Уведомления и логи

шаблоны сообщений

журнал рассылок

контроль отправок

10. Настройки проекта

часовой пояс

тихие часы

платёжные настройки

администраторы
